<%- include('../layout/adminheader'); -%>
<style>
  input {
    height: 60px;
  }
  .cate-div input{
    width: 300px;
  }
  .images{
    display: flex;
   padding: 10px;
   margin-bottom: 15px;
  }
  .Images-1 {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 0 10px 20px rgb(0 0 0 / 10%);
}
  .Images-1 img{
    width: 150px;
    object-fit: cover;
  }
  .a{
    width: 90%;
    margin: 10px auto;
  }
</style>


<div class="container-fluid">
  <div class="row a">
    <div class="col-lg-12 align-items-center" style="margin-bottom: 30px">
      <div class="heading text-center">
        <h4 class="">Edit Product</h4>
      </div>

      <div class="formm">
        <form class="mt-2" id="ff1" method="post" enctype="multipart/form-data" action="/admin/edit-product/<%= product._id %>">
          <div class="form-group">
            <label >Product Name :</label>
            <input
              type="text"
              class="form-control"
              placeholder="Product Name :"
              name="title"
              value="<%= product.title %>"
              required
            />
          </div>
          <div class="form-group">
            <label >Product Descrpition :</label>
            <input
              type="text"
              class="form-control"
              placeholder="Desc :"
              value="<%= product.desc %>"
              name="desc"
              required
            />
          </div>
          <div class="form-group">
            <label >Product Size :</label>
            <input
              type="text"
              class="form-control"
              placeholder="Size :"
              value="<%= product.size %>"
              name="size"
              required
            />
          </div>
          <div class="form-group">
            <label >Product Color :</label>
            <input
              type="text"
              class="form-control"
              placeholder="Color :"
              value="<%= product.color %>"
              name="color"
              required
            />
          </div>
          <div class="form-group">
            <div class="cate-array">
              <label >Product Category :</label>
              <% for(var i=0; i<product.categories.length; i++){%>
              <div class="cate-div d-flex">
                
                <input
                  type="text"
                  class="form-control m-1 "
                  placeholder="Categories :"
                  name="categories"
                  value="<%= product.categories[i] %>"
                  required
                />
                <button class="btn btn-danger remove-btn m-2"  >Delete</button>
              </div>
              <% }%>
            </div>
           
          </div>
          <button id="add-label" class="btn btn-success p-2 mb-2">Add more Categories</button>
          
          <div class="form-group">
            <label for="">Selling Price</label>
            <input
              type="number"
              class="form-control"
              placeholder="Selling Price :"
              name="price"
              value="<%= product.price %>"
              required
            />
          </div>
          <div class="form-group">
            <label >Product Listing Price :</label>
            <input
              type="number"
              class="form-control"
              placeholder="Listing Price :"
              name="listingprice"
              value="<%= product.listingprice %>"
              required
            />
          </div>
          <div class="form-group">
            <label >Product Quantity :</label>
            <input
              type="number"
              class="form-control"
              placeholder="Quantity :"
              name="qty"
              value="<%= product.qty %>"
              required
            />
          </div>
          <div class="images">
            <label >Product Images :</label>
            <% for(var i=0; i<product.productPictures.length; i++){%>
              <div class="Images-1">
                <img src="/<%= product.productPictures[i] %>" alt="" srcset="">
                <input type="text" name="productPictures" value="<%= product.productPictures[i] %>" hidden>
                <button class="btn btn-danger remove-btn m-2"  >Delete</button>
              </div>
              
              <% }%>
          </div>
          <div class="form-group">
            

            <input
              type="file"
              class="form-control"
              placeholder="Product Images :"
              name="productPictures"
              multiple
              
            />
            
          </div>
          <button type="submit" class="btn btn-success">Edit Product</button>
        </form>
      </div>
    </div>
  </div>
</div>



<!-- <div class="row">
  <div class="col-lg-6">
    
<div class="form-group">
  <div class="cate-array">
    <% for(var i=0; i<product.categories.length; i++){%>
    <div class="cate-div" id="<%= product.categories[i] %>">
      
      <input
      
        type="text"
        class="form-control"
        placeholder="Categories :"
        name="categories"
        value="<%= product.categories[i] %>"
        required
      />
      <button class="btn btn-danger d-grid remove-btn"  >Delete</button>
     
    </div>
    <% }%>
  </div>
 
</div>

</div>
</div> -->


<script>
  
    let addBtn = document.getElementById('add-label');
    let cateArray= document.querySelector('.cate-array');
    let CateDiv = document.querySelectorAll('.cate-div')[0];

addBtn.addEventListener('click', function(e){
  e.preventDefault()
  let value = CateDiv.cloneNode(true);
  let input = value.getElementsByTagName('input')[0];
  input.value = '';
  cateArray.appendChild(value);
});

// function remove(el){
//   var element =el;
//   element.delete()
// }
$(document).on('click','.remove-btn',function(e){
  e.preventDefault();
  let rowItem=$(this).parent();
  $(rowItem).remove();
})

// function remoov(id){
//   id.remove();
// }


//     let addIngredientsBtn = document.getElementById('addIngredientsBtn');
// let ingredientList = document.querySelector('.ingredientList');
// let ingredeintDiv = document.querySelectorAll('.ingredeintDiv')[0];

// addIngredientsBtn.addEventListener('click', function(){
//   let newIngredients = ingredeintDiv.cloneNode(true);
//   let input = newIngredients.getElementsByTagName('input')[0];
//   input.value = '';
//   ingredientList.appendChild(newIngredients);
// });
</script>


<%- include('../layout/adminfooter'); -%>
